{% extends 'main/base.html' %}
{% block content%}
<div class="col-12">
    <div class="col-3"></div>
    <div class="col-6">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">
                    Лог рассылки
                </h3>
            </div>
            <div class="card-body">
                <h6 class="card-text">Рассылка: {{ mailingstatistic.mailing }}</h6>
                <p class="card-text">Клиенты: {{ mailingstatistic.mailing.clients.all|join:", " }}</p>
                <p class="card-text">Периодичность отправки: {{ mailingstatistic.mailing.period }}</p>
                <p class="card-text">Дата и время попытки: {{ mailingstatistic.date_time_last_attempt }}</p>
                <p class="card-text">Статистика: {{ mailing.status }}</p>
                <div class="btn-group">
                    <a href="{% url 'mailings:mailing_list' %}" class="btn btn-success">Назад</a>
                </div>
            </div>

        </div>
    </div>
</div>
{% endblock %}

<!--class MailingStatistic(models.Model):-->
<!--    """ Cтатистика рассылок"""-->
<!--    STATUS_MAILING = (-->
<!--        ('success', 'success'),-->
<!--        ('failure', 'failure'),-->
<!--    )-->
<!--    objects = None-->
<!--    mailing = models.ForeignKey(Mailing, on_delete=models.CASCADE, verbose_name='Рассылка')-->
<!--    date_time_last_attempt = models.DateTimeField(auto_now=True, verbose_name='Дата и время последней попытки')-->
<!--    status_attempt = models.CharField(max_length=20, choices=STATUS_MAILING, verbose_name='Статус попытки')-->
<!--    response = models.TextField(**NULLABLE, verbose_name='Ответ сервера')-->

<!--    def __str__(self):-->
<!--        return f"{self.mailing}"-->

<!--    class Meta:-->
<!--        verbose_name = 'Попытка'-->
<!--        verbose_name_plural = 'Попытки'-->
